# google-keep-markdown
This is a bookrmarklet code that you can use to make Google Keep showing bookmarklet


## Instruction
Create a new bookmark with the following data...
```
javascript:(function()%7B(function()%7B%0A  let target %3D document.body%3B%0A  const isDarkMode %3D new Date().getHours() >%3D 19 %7C%7C new Date().getHours() <%3D 8%3B%0A  let colorIdx %3D 0%3B%0A  let styleDom %3D document.getElementById('style-dialog')%3B%0A  if(!styleDom)%7B%0A    styleDom %3D document.createElement("style")%3B%0A    styleDom.id%3D 'style-dialog'%0A    styleDom.innerText %3D %60%0A      %3Aroot%7B%0A        --color-bg%3A %23282a36%3B%0A        --color-fg%3A %23f8f8f2%3B%0A        --color-link%3A %2350fa7b%3B%0A        --color-border%3A %2344475a%3B%0A      %7D%0A%0A      %23content-dialog%7B%0A        position%3A fixed%3B%0A        top%3A 10px%3B%0A        bottom%3A 10px%3B%0A        left%3A 10px%3B%0A        right%3A 10px%3B%0A        z-index%3A 40001%3B%0A        background%3A var(--color-bg)%3B%0A        color%3A var(--color-fg)%3B%0A        padding%3A 20px 25px%3B%0A        overflow%3A auto%3B%0A        border%3A 5px solid var(--color-border)%3B%0A        border-radius%3A 5px%3B%0A        display%3A grid%3B%0A        grid-template-columns%3A minmax(600px%2C 1fr) 450px%3B%0A        box-sizing%3A border-box%3B%0A      %7D%0A%0A      %23content-dialog pre%7B%0A        border%3A 1px solid var(--color-border)%3B%0A        padding%3A 10px%3B%0A        margin-top%3A 5px%3B%0A        margin-bottom%3A 10px%3B%0A      %7D%0A%0A      %23content-dialog h1%7B%0A        padding%3A 0%3B%0A        margin%3A 0%3B%0A        margin-bottom%3A 15px%3B%0A      %7D%0A%0A      %23content-dialog a%7B%0A        color%3A var(--color-link)%3B%0A      %7D%0A%0A      %23content-dialog h2%2C%0A      %23content-dialog h3%2C%0A      %23content-dialog h4%2C%0A      %23content-dialog h5%2C%0A      %23content-dialog h6%7B%0A        padding%3A 0%3B%0A        margin%3A 0%3B%0A      %7D%0A%0A      %23content-dialog p%2C %23content-dialog pre%7B%0A        margin-top%3A 0%3B%0A        margin-bottom%3A 20px%3B%0A      %7D%0A%0A      %23content-dialog figure%7B%0A%0A      %7D%0A%0A      %23content-dialog figure img%7B%0A        width%3A 100%25%3B%0A        display%3A block%3B%0A        margin%3A 0 auto 30px 0%3B%0A        border-radius%3A 5px%3B%0A        border%3A 2px solid  var(--color-border)%0A      %7D%0A%0A      %40media only screen and (min-width%3A 1600px) %7B%0A        %23content-dialog%7B%0A          grid-template-columns%3A minmax(800px%2C 1fr) 900px%3B%0A        %7D%0A      %7D%0A%0A      %40media only screen and (max-width%3A 1050px) %7B%0A        %23content-dialog%7B%0A          grid-template-columns%3A 1fr%3B%0A        %7D%0A      %7D%0A    %60%0A    target.appendChild(styleDom)%3B %0A%0A    let newScript %3D document.createElement("script")%3B%0A    newScript.src %3D "https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fmarked%2Fmarked.min.js"%3B%0A    target.appendChild(newScript)%3B%0A%0A    window.addEventListener('keydown'%2C (e) %3D>%7B %0A      let stop %3D false%3B%0A%0A      const keycode %3D parseInt(e.keyCode)%3B%0A%0A      if(keycode %3D%3D%3D 9)  %7B%0A        switchColor()%3B%0A%0A        contentDom.focus()%3B%0A%0A        stop %3D true%3B%0A      %7D%0A%0A      if(stop)%7B%0A        e.preventDefault()%3B%0A        e.stopPropagation()%3B%0A%0A        origContentDom.focus()%3B%0A        return false%3B%0A      %7D%0A    %7D)%0A  %7D%0A%0A  let contentDom %3D document.getElementById('content-dialog')%3B%0A%0A  function _formatMarkdownForKeep()%7B%0A    const origTitleDom %3Ddocument.querySelectorAll(%60%5Bcontenteditable%3D"true"%5D%5Bspellcheck%3D"true"%5D%60)%5B0%5D%0A    const origContentDom %3Ddocument.querySelectorAll(%60%5Bcontenteditable%3D"true"%5D%5Bspellcheck%3D"true"%5D%60)%5B1%5D%0A    contentDom %3D document.getElementById('content-dialog')%3B%0A%0A    let shouldBindData %3D false%3B%0A    try%7B%0A      shouldBindData %3D origContentDom %26%26 origContentDom.innerText.trim().length > 0%3B%0A    %7Dcatch(err)%7B%7D%0A    %0A%0A    let width %3D 600%3B%0A    if(shouldBindData)%7B%0A      width %3D origContentDom.offsetWidth %2B 40%3B%0A    %7D%0A%0A    if(!contentDom)%7B%0A      contentDom %3D document.createElement("div")%3B%0A      contentDom.id %3D 'content-dialog'%3B%0A      contentDom.contentEditable %3D true%0A      %2F%2FcontentDom.addEventListener('blur'%2C () %3D> contentDom.remove())%0A      contentDom.addEventListener('keydown'%2C (e) %3D>%7B %0A        let stop %3D false%3B%0A%0A        const keycode %3D parseInt(e.keyCode)%3B%0A        if(keycode %3D%3D%3D 27)%7B%0A          %2F%2F escape key%0A          contentDom.remove()%3B%0A          stop %3D true%3B%0A          %0A        %7D%0A%0A        if(stop)%7B%0A          e.preventDefault()%3B%0A          e.stopPropagation()%3B%0A%0A          origContentDom.focus()%3B%0A          return false%3B%0A        %7D%0A      %7D)%0A      target.appendChild(contentDom)%3B  %0A    %7D%0A%0A    if(shouldBindData)%7B%0A      const articleContent %3D document.createElement('article')%3B%0A      contentDom.append(articleContent)%0A      const figureImages %3D document.createElement('figure')%3B%0A        contentDom.append(figureImages)%0A%0A      const newContentHtml %3D %60<h2>%24%7BorigTitleDom.innerText%7D<%2Fh2><hr %2F>%60 %2B marked(origContentDom.innerText).trim()%3B%0A      if(newContentHtml !%3D%3D articleContent.innerHTML %26%26 document.activeElement.id !%3D%3D 'content-dialog')%7B%0A        articleContent.innerHTML %3D newContentHtml%3B%0A%0A        %2F%2F append images%0A        try%7B%0A          for(const img of origTitleDom.previousSibling.querySelectorAll('img'))%7B%0A            const newImg %3D document.createElement("div")%3B%0A            %2F%2F newImg.innerHTML %3D %60Loading Image...%60%3B%0A            parseAndInsertImageAsBase64(img.src%2C newImg)%3B%0A            figureImages.append(newImg)%0A          %7D%0A        %7D catch(err)%7B%0A%0A        %7D%0A      %7D%0A      %0A%0A      contentDom.focus()%3B%0A    %7D else %7B%0A      %2F%2F setTimeout(_formatMarkdownForKeep%2C 300)%3B%0A      contentDom.remove()%3B%0A    %7D%0A  %7D%0A%0A  function switchColor()%7B%0A    %2F%2F tab key or shift%0A    var r %3D document.querySelector('%3Aroot')%3B%0A    colorIdx%2B%2B%3B%0A    if(colorIdx %25 2 %3D%3D%3D 0)%7B%0A      %2F%2F dark%0A      r.style.setProperty('--color-bg'%2C '%23282a36')%3B%0A      r.style.setProperty('--color-fg'%2C '%23f8f8f2')%3B%0A      r.style.setProperty('--color-link'%2C '%2350fa7b')%3B%0A      r.style.setProperty('--color-border'%2C '%23f1fa8c')%3B  %0A    %7D else %7B%0A      %2F%2F light%0A      r.style.setProperty('--color-bg'%2C '%23f8f8f2')%3B%0A      r.style.setProperty('--color-fg'%2C '%23282a36')%3B%0A      r.style.setProperty('--color-link'%2C '%23ff5555')%3B%0A      r.style.setProperty('--color-border'%2C '%2344475a')%3B%0A    %7D%0A  %7D%0A%0A  function toDataURL(url%2C callback) %7B%0A    var xhr %3D new XMLHttpRequest()%3B%0A    xhr.onload %3D function() %7B%0A      var reader %3D new FileReader()%3B%0A      reader.onloadend %3D function() %7B%0A        callback(reader.result)%3B%0A      %7D%0A      reader.readAsDataURL(xhr.response)%3B%0A    %7D%3B%0A    xhr.open('GET'%2C url)%3B%0A    xhr.responseType %3D 'blob'%3B%0A    xhr.send()%3B%0A  %7D%0A%0A  function parseAndInsertImageAsBase64(url%2C newImg)%7B%0A    toDataURL(url%2C function(dataUrl) %7B%0A      newImg.innerHTML %3D %60<img src%3D"%24%7BdataUrl%7D" altText%3D"Doc Image" %2F>%60%3B%0A    %7D)%0A  %7D%0A%0A  switchColor()%3B%0A%0A  setTimeout(_formatMarkdownForKeep%2C 300)%3B%0A%7D)()%7D)()%3B
```
